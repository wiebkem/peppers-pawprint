<script src="{{ "js/" | absURL }}{{ "cookieconsent.min.js" }}" data-cfasync="false"></script>
<script>
    window.cookieconsent.initialise({
        "palette": {
            "popup": {
            "background": "#544a4a",
            "text": "#e4e2e2"
            },
            "button": {
            "background": "#11abb0"
            }
        },
        "theme": "classic",
        "type": "opt-in",
        "content": {
            "message": '{{ i18n "cookie_message" }}',
            "deny": '{{ i18n "cookie_dismiss" }}',
            "allow": '{{ i18n "cookie_allow" }}',
            "link": '{{ i18n "cookie_link" }}',
            "href": '{{ "privacy" | safeURL }}'
        },
        onInitialise: initialise,
        onStatusChange: statusChange
    });

    function initialise(status) {
        var type = this.options.type
        if (type === 'opt-in' && status === 'allow') {
            activateTemplate('#cookieConsent')
        } else {
            disableGoogleAnalytics();
        }
    }

    function statusChange(status, chosenBefore) {
        var type = this.options.type;
        if (type === 'opt-in' && status === 'allow') {
            activateTemplate('#cookieConsent')
        } else {
            disableGoogleAnalytics();
        } 
    }

    // does the browser support <template>? (all but legacy IE)
    function supportsTemplate() {
        return 'content' in document.createElement('template')
    }

    function activateTemplate(selector) {
        if (supportsTemplate) {
            var content = document.querySelector(selector).content;
            var clone = document.importNode(content, true);
            document.body.appendChild(clone);
        } else {
            enableGoogleAnalytics();
        }
    }
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
